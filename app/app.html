<!doctype html>
<html lang="es">
    <head>
        <title>Ignicontactos</title>
        <script src=""></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
        <script src="https://code.angularjs.org/1.5.7/angular-cookies.min.js"></script>
        <script src="ng-file-upload-all.min.js"></script>
        <script src="ng-map.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js"></script>
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css">
        <link rel="stylesheet" href="styles.css">
    </head>
    <body ng-app="ignicontactos">
        <div class="row">
            <div class="col s12">
                <nav class="purple darker-2">
                    <div class="nav-wrapper">
                        <a href="home.php" class="brand-logo"><i class="material-icons left">assignment_ind</i>Ignicontactos</a>
                        <ul class="right hide-on-med-and-down">
                            <li class="">Bienvenido <?php echo $_SESSION['username']; ?></li>
                            <li class=""><a href="logout.php" class="waves-effect waves-light btn">Salir</a></li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>

        <div ng-controller="ContactosListController" class="container section">
            <div class="row">
            <div class="col s4">
                <div class="pure-form">
                    <input type="text" placeholder="Filtrar" ng-model="filtro" class="pure-input-1">
                </div>
                <ul class="collection">
                    <li ng-repeat="contacto in contactos | filter: filtro">
                        <a href="#" ng-click="verDetalle(contacto)" class="collection-item">
                            {{contacto.nombres}} {{contacto.apellidos}}
                        </a>
                    </li>
                </ul>
            </div>

            <div ng-controller="ContactoDetalleController" class="col s8">
                <div ng-if="selectedContacto.nombres">
                    <div class="card large purple lighten-2">
                        <div class="card-content white-text">
                            <span class="card-title"></span>
                            <span class="card-title activator grey-text text-darken-4">
                                {{selectedContacto.nombres}} {{selectedContacto.apellidos}}
                                <i class="material-icons right">more_vert</i></span>
                            <p>Telefono: {{selectedContacto.telefono}}</p>
                            <p>Email: {{selectedContacto.email}}</p>
                        </div>
                        <div class="card-reveal">
                            <span class="card-title grey-text text-darken-4">
                                {{selectedContacto.nombres}} {{selectedContacto.apellidos}}
                                <i class="material-icons right">close</i></span>
                            <p>Cumpleaños: {{selectedContacto.fecha_nacimiento}}</p>
                            <p>Direccion: {{selectedContacto.pais}} {{selectedContacto.departamento}} {{selectedContacto.ciudad}}
                                {{selectedContacto.direccion}}
                            </p>
                            <p>Categoria: {{selectedContacto.categoria}}</p>
                            <p>Notas: {{selectedContacto.notas}}</p>
                            <div ng-if="selectedContacto.direccion">
                                <div map-lazy-load="https://maps.googleapis.com/maps/api/js?key=AIzaSyCenvVgbTO5zfRsh-8MGKS04rTMOPZur_w">
                                    <ng-map center="{{selectedContacto.direccion}}" style="height:300px">
                                        <marker position="bogota, colombia"><marker>
                                    </ng-map>
                                </div>
                            </div>
                        </div>
                        <div class="card-action">
                            <a ng-click="borrarContacto()" href="#"><i class="material-icons white-text">delete</i></a>
                            <a ng-click="editarContacto()" href="#"><i class="material-icons white-text">mode_edit</i></a>
                        </div>
                    </div>
                </div>
            </div>
            </div>
        </div>

        <div class="modal" id="contacto-form">
            <div class="modal-content">
                <form ng-controller="ContactoCrearController" class="col s12">
                    <div class="row">
                        <div class="input-field col s4">
                            <input ng-model="contacto.nombres" type="text" placeholder="Nombres" class="validate">
                            <label for="contacto.nombres">Nombres:</label>
                        </div>
                        <div class="input-field col s4">
                            <input ng-model="contacto.apellidos" type="text" placeholder="Apellidos" class="validate">
                            <label for="contacto.apellidos">Apellidos:</label>
                        </div>
                        <div class="input-field col s4">
                            <input ng-model="contacto.telefono" type="text" placeholder="Telefono" class="validate">
                            <label for="contacto.telefono">Telefono:</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s4">
                            <input ng-model="contacto.email" type="text" placeholder="email"> 
                            <label for="">Email:</label>
                        </div>
                        <div class="input-field col s4">
                            <input ng-model="contacto.categoria" type="text" placeholder="categoria"> 
                            <label for="">Categoria:</label>
                        </div>
                        <div class="input-field col s4">
                            <input ng-model="contacto.fecha_nacimiento" type="text" placeholder="fecha_nacimiento"> 
                            <label for="">Fecha de Cumpleaños:</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s4">
                            <input ng-model="contacto.pais" type="text" placeholder="pais"> 
                            <label for="">Pais:</label>
                        </div>
                        <div class="input-field col s4">
                            <input ng-model="contacto.departamento" type="text" placeholder="departamento"> 
                            <label for="">Departamento:</label>
                        </div>
                        <div class="input-field col s4">
                            <input ng-model="contacto.ciudad" type="text" placeholder="ciudad"> 
                            <label for="">Ciudad:</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s6">
                            <input ng-model="contacto.direccion" type="text" placeholder="direccion"> 
                            <label for="">Direccion:</label>
                        </div>
                        <div class="input-field col s6">
                            <input ng-model="contacto.coordenadas" type="text" placeholder="coordenadas"> 
                            <label for="">Coordenadas:</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s12">
                            <textarea ng-model="contacto.notas" type="text" placeholder="Notas" class="materialize-textarea"></textarea>
                            <label for="contacto.notas">Notas:</label>
                        </div>
                    </div>
                    <div class="btn" ngf-select="upload($file)" ng-model="file" name="file" ngf-pattern="'image/*'"
    ngf-accept="'image/*'" ngf-max-size="20MB" ngf-min-height="100" 
    ngf-resize="{width: 100, height: 100}">Imagen de Contacto</div>
                    <a ng-click="crearContacto()" class="waves-effect waves-light btn"><i class="material-icons right">done</i>Crear</a>
                    <a ng-click="guardarCambios()" class="waves-effect waves-light btn"><i class="material-icons right">done</i>Guardar Cambios</a>
                </form>
            </div>
        </div>
        <div class="fixed-action-btn" style="buttom: 2em; right: 2em;">
            <a class="btn-floating btn-large waves-effect waves-light red modal-trigger" href="#contacto-form"><i class="material-icons">add</i></a>
        </div>
        <script src="app.js"></script>
    </body>
</html>
